import { initializeArtGallery } from './artGallery';
 import { renderAboutSection } from './about';
 import { renderContactSection } from './contact';

 document.addEventListener('DOMContentLoaded', () => {
  const root = document.getElementById('root');

  if (!root) {
  document.body.innerHTML = `<div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative" role="alert">
  <strong class="font-bold">Error!</strong>
  <span class="block sm:inline">Root element with ID 'root' not found.</span>
  </div>`;
  return;
  }

  // Create header
  const header = document.createElement('header');
  header.className = 'bg-white shadow-md sticky top-0 z-50';
  header.innerHTML = `
  <div class="container mx-auto px-4 py-3 flex items-center justify-between">
  <a href="index.html" class="text-2xl font-bold text-gray-800">AI Art Gallery</a>
  <nav>
  <ul class="flex space-x-6">
  <li><a href="index.html" class="hover:text-blue-500">Gallery</a></li>
  <li><a href="about.html" class="hover:text-blue-500">About</a></li>
  <li><a href="contact.html" class="hover:text-blue-500">Contact</a></li>
  </ul>
  </nav>
  </div>
  `;

  // Create main content area
  const main = document.createElement('main');
  main.className = 'container mx-auto px-4 py-8';
  main.id = 'main-content';

  // Create footer
  const footer = document.createElement('footer');
  footer.className = 'bg-gray-100 border-t border-gray-200 py-4 text-center text-gray-600';
  footer.textContent = 'Â© 2024 AI Art Gallery';

  // Append elements to the root
  root.appendChild(header);
  root.appendChild(main);
  root.appendChild(footer);

  // Initialize art gallery in the main content area
  const galleryContainer = document.createElement('div');
  galleryContainer.id = 'art-gallery';
  main.appendChild(galleryContainer);
  initializeArtGallery('art-gallery');

  // Load About Section
  if (document.location.pathname.includes('about.html')) {
  main.innerHTML = ''; // Clear existing content
  main.appendChild(renderAboutSection());
  }

  // Load Contact Section
  if (document.location.pathname.includes('contact.html')) {
  main.innerHTML = ''; // Clear existing content
  main.appendChild(renderContactSection());
  }

  // Add navigation event listeners (example for About)
  const aboutLink = document.querySelector('a[href="about.html"]');
  if (aboutLink) {
  aboutLink.addEventListener('click', (event) => {
  event.preventDefault();
  main.innerHTML = ''; // Clear existing content
  main.appendChild(renderAboutSection());
  window.history.pushState({ page: 'about' }, 'About', 'about.html');
  });
  }

  // Add navigation event listeners (example for Contact)
  const contactLink = document.querySelector('a[href="contact.html"]');
  if (contactLink) {
  contactLink.addEventListener('click', (event) => {
  event.preventDefault();
  main.innerHTML = ''; // Clear existing content
  main.appendChild(renderContactSection());
  window.history.pushState({ page: 'contact' }, 'Contact', 'contact.html');
  });
  }

  // Handle back/forward navigation
  window.addEventListener('popstate', (event) => {
  if (event.state && event.state.page === 'about') {
  main.innerHTML = '';
  main.appendChild(renderAboutSection());
  } else if (event.state && event.state.page === 'contact') {
  main.innerHTML = '';
  main.appendChild(renderContactSection());
  } else {
  main.innerHTML = '';
  const galleryContainer = document.createElement('div');
  galleryContainer.id = 'art-gallery';
  main.appendChild(galleryContainer);
  initializeArtGallery('art-gallery');
  }
  });
 });